schemaVersion: v1.0

defaults:
  clusters.emoji: ":buildkite:"
  clusters.color: "#000000"
  clusters.tokens:
    - key: blue
      description: "blue"
      allowed_ip_addresses:
        - 0.0.0.0/0
    - key: green
      description: "green"
      allowed_ip_addresses:
        - 0.0.0.0/0

clusters:
  - key: yellow
    name: "Yellow Cars Only"
    description: "A cluster for yellow cars."
    emoji: ":car-yellow:"
    color: "#A2CFA5"
    default_queue: build
    queues:
      - key: build
        description: "The build queue for the yellow car cluster."
        agents:
          - type: elastic-ci-stack
            token_key: blue
            config:
              template_url: "https://s3.amazonaws.com/buildkite-aws-stack/master/aws-stack.yml"
              agents_per_instance: 1
              associate_public_ip_address: true
              instance_types: "t4g.2xlarge"
              min_size: 0
              max_size: 5
              root_volume_size: 50
      - key: restricted
        description: "The restricted queue for the Avocado cluster."
      - key: special
        description: "The special queue for the Avocado cluster."
  - key: blue
    name: "Blue Cars Only"
    description: "A cluster for blue cars."
    emoji: ":car-blue:"
    color: "#F5E6CC"
    default_queue: build
    queues:
      - key: build
        description: "The build queue for the blue car cluster."
      - key: restricted
        description: "The restricted queue for the blue car cluster."
      - key: special
        description: "The special queue for the blue car cluster."
    tokens:
      - key: blue
        description: "blue"
        allowed_ip_addresses:
          - 0.0.0.0/0
      - key: green
        description: "green"
        allowed_ip_addresses:
          - 0.0.0.0/0
  - key: black
    name: "Black Cars Only"
    description: "A cluster for black cars."
    emoji: ":car-black:"
    color: "#B565A7"
    default_queue: build
    queues:
      - key: build
        description: "The build queue for the black car cluster."
      - key: restricted
        description: "The restricted queue for the black car cluster."
      - key: special
        description: "The special queue for the black car cluster."
